const mongoose = require("mongoose");
require("dotenv").config();
const connectDB = require("./db");
const { Expense, Trip } = require("./model");

const wrong_records = [
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 151,
    description: "(Zomato - Personal) Paid to Zomato Private Limited",
    date: "2025-08-06T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb205",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.766Z",
    updatedAt: "2025-10-12T09:25:49.766Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c12cb0120fc7886561792",
    amount: 5000,
    description: "(Paint job) Money sent to Sunil Delhirama Shrivas",
    date: "2025-08-06T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb206",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.766Z",
    updatedAt: "2025-10-12T09:25:49.766Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 100,
    description: "(Zomato - Personal) Paid to ZOMATO",
    date: "2025-08-06T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb207",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.766Z",
    updatedAt: "2025-10-12T09:25:49.766Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 120,
    description: "(Vadapav) Paid to Kashyap Rahul Jagrambhai",
    date: "2025-08-07T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb208",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.766Z",
    updatedAt: "2025-10-12T09:25:49.766Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 239,
    description: "(Zomato - Personal) Paid to Zomato",
    date: "2025-08-07T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb209",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.766Z",
    updatedAt: "2025-10-12T09:25:49.766Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 234,
    description: "(Zomato - Delhi) Paid to Zomato",
    date: "2025-08-08T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb20a",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 425,
    description: "(Zomato - Home) Paid to Zomato",
    date: "2025-08-08T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb20b",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "6790886daf98caee54103ab0",
    amount: 155,
    description: "(Grid) Money sent to Samiran Atulchandra Boruah",
    date: "2025-08-09T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb20c",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 232,
    description: "(Zomato - Personal) Paid to Eternal Limited",
    date: "2025-08-09T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb20d",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "678c8a182152f3cd1d998255",
    amount: 150,
    description: "(Petrol - Football) Paid to Ambalal Petroleum",
    date: "2025-08-09T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb20e",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 255,
    description: "(Zomato - Personal) Paid to Zomato",
    date: "2025-08-09T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb20f",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 275,
    description: "(Eatsure - Personal) Money sent to Lokesh Kumar Vakhatram",
    date: "2025-08-10T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb210",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c10160120fc7886561760",
    amount: 459,
    description: "(Eatsure - Home) Paid to Sapphire Foods India Limited",
    date: "2025-08-10T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb211",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "6790886daf98caee54103ab0",
    amount: 165,
    description: "(Football - KSA) Money sent to Tangariya Lalitsingh",
    date: "2025-08-10T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb212",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 275,
    description: "(Eatsure - Personal) Money sent to Lokesh Kumar Vakhatram",
    date: "2025-08-11T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb213",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c12cb0120fc7886561792",
    amount: 10000,
    description: "(Car Installment) Money sent to Dileep Kumar",
    date: "2025-08-12T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb214",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c10160120fc7886561760",
    amount: 1276,
    description: "(Magic) Paid to Flavcoventuresprivat ",
    date: "2025-08-12T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb215",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "678c8c0e2152f3cd1d99826e",
    amount: 100,
    description: "(Haircut) Money sent to Anil Nai",
    date: "2025-08-13T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb216",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c127a0120fc788656178c",
    amount: 219,
    description: "(Zomato - Mom) Paid to Zomato",
    date: "2025-08-13T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb217",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 287,
    description: "(Eatsure - Personal) Money sent to Lokesh Kumar Vakhatram",
    date: "2025-08-13T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb218",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "6790886daf98caee54103ab0",
    amount: 65,
    description: "(Football - Obanato) Money sent to Mr Rai Aman",
    date: "2025-08-14T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb219",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c10160120fc7886561760",
    amount: 304,
    description: "(La Pinoz - Home) Paid to The Gray A Unique Bistro",
    date: "2025-08-14T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb21a",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 151,
    description: "(Zomato - Personal) Paid to Zomato Limited",
    date: "2025-08-15T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb21b",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 192,
    description: "(Zomato - Personal) Paid to Zomato",
    date: "2025-08-15T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb21c",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 121,
    description: "(Zomato - Personal) Paid to Zomato",
    date: "2025-08-15T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb21d",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745d60095e1a82875caf93",
    amount: 469,
    description: "(Zepto - Personal) Paid to Zepto Marketplace",
    date: "2025-08-17T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb21e",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 287,
    description:
      "(Eatsure - Personal) Paid to Rebel Marketplace India Private Limited",
    date: "2025-08-17T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb21f",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "678c8a182152f3cd1d998255",
    amount: 100,
    description: "(Petrol - Football) Paid to B R Petroleum",
    date: "2025-08-17T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb220",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "6790886daf98caee54103ab0",
    amount: 165,
    description: "(Football - KSA) Money sent to Tangariya Lalitsingh",
    date: "2025-08-17T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb221",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.767Z",
    updatedAt: "2025-10-12T09:25:49.767Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c10160120fc7886561760",
    amount: 30,
    description: "(Badam Shake) Paid to Abhishek Suwalka",
    date: "2025-08-17T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb222",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c10160120fc7886561760",
    amount: 110,
    description: "(Sandwich) Paid to Dhaval Koshti",
    date: "2025-08-17T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb223",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 268,
    description: "(Zomato - Personal) Paid to Zomato Private Limited",
    date: "2025-08-18T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb224",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c10160120fc7886561760",
    amount: 130,
    description: "(Dinner - Red Chillies - Home) Paid to Red Chilli",
    date: "2025-08-18T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb225",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 284,
    description:
      "(Eatsure - Personal) Money sent to Asari Ajaykumar Chandubhai",
    date: "2025-08-19T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb226",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c10160120fc7886561760",
    amount: 1825,
    description: "(Dinner - Home) Paid to Eat Punjab Chandkheda",
    date: "2025-08-19T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb227",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c12cb0120fc7886561792",
    amount: 308,
    description: "(TV Repair) Paid to Urban Company Limited",
    date: "2025-08-20T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb228",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "678c8c0e2152f3cd1d99826e",
    amount: 410,
    description: "(Unknown) Money sent to Shaikh Faizan Ali Usman Gani",
    date: "2025-08-20T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb229",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c12cb0120fc7886561792",
    amount: 2192,
    description: "(TV Repair) Paid to Urban Company",
    date: "2025-08-21T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb22a",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c10160120fc7886561760",
    amount: 173,
    description: "(Zomato - Home) Paid to Zomato Limited",
    date: "2025-08-21T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb22b",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745d60095e1a82875caf93",
    amount: 1466,
    description: "(Clothes) Paid to Flipkart",
    date: "2025-08-22T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb22c",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 157,
    description: "(Zomato - Personal) Paid to Zomato Limited",
    date: "2025-08-23T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb22d",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "678c8c0e2152f3cd1d99826e",
    amount: 60,
    description: "(Garba - Water) Money sent to Parth Jagdishbhai Samani",
    date: "2025-08-23T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb22e",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "678c8c0e2152f3cd1d99826e",
    amount: 100,
    description: "(Garba - Water) Money sent to Parth Jagdishbhai Samani",
    date: "2025-08-23T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb22f",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c10160120fc7886561760",
    amount: 226,
    description: "(Garba - Dinner - Personal) Paid to Vikas Rawat",
    date: "2025-08-24T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb230",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c10160120fc7886561760",
    amount: 267,
    description: "(Zomato - Home) Paid to Eternal Limited",
    date: "2025-08-24T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb231",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 162,
    description: "(Zomato - Personal) Paid to Zomato Limited",
    date: "2025-08-25T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb232",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 267,
    description: "(Zomato - Personal) Paid to Zomato",
    date: "2025-08-25T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb233",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 162,
    description: "(Zomato - Personal) Paid to Zomato",
    date: "2025-08-26T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb234",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "6776b34d91c77e22302c5303",
    amount: 76,
    description: "(Rapido - meet with P) Money sent to Vanzara Kamlesh",
    date: "2025-08-27T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb235",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c10160120fc7886561760",
    amount: 660,
    description: "(Lunch - meet with P) Paid to La Shanti Brewbake Art",
    date: "2025-08-27T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb236",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "684fbcd3dcef6b22c3a6cf76",
    amount: 3000,
    description: "(Lent - to Jeet) Money sent to Jeet Kamlesh Maniar",
    date: "2025-08-27T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb237",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 261,
    description: "(Eatsure - Personal) Money sent to Lokesh Kumar Vakhatram",
    date: "2025-08-27T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb238",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 261,
    description:
      "(Eatsure - Personal) Money sent to Prajapati Satish Talshibhai",
    date: "2025-08-29T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb239",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c10160120fc7886561760",
    amount: 450,
    description: "(Eatsure - Home) Paid to Www Eatsure Com",
    date: "2025-08-29T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb23a",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 192,
    description: "(Zomato - Personal) Paid to Zomato Limited",
    date: "2025-08-30T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb23b",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c127a0120fc788656178c",
    amount: 190,
    description: "(Ramnavmi - Plates) Paid to Rajkumar Patel",
    date: "2025-09-01T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb23c",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c127a0120fc788656178c",
    amount: 300,
    description: "(Ramnavmi - Ice Cream) Paid to Shree Krishna Dairy Parlour",
    date: "2025-09-01T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb23d",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 153,
    description: "(Zomato - Personal) Paid to Zomato Limited",
    date: "2025-09-01T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb23e",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "678c8c0e2152f3cd1d99826e",
    amount: 250,
    description: "Money sent to Ravikumar Satyanarayan Sharma",
    date: "2025-09-02T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb23f",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "678c8a182152f3cd1d998255",
    amount: 1000,
    description: "(Petrol - Car) Paid to Ambalal Petroleum",
    date: "2025-09-02T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb240",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c10160120fc7886561760",
    amount: 1498,
    description: "(Mad Over Grill - Dinner) Paid to Zomato Limited",
    date: "2025-09-02T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb241",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 190,
    description: "(Zomato - Personal) Paid to Zomato Limited",
    date: "2025-09-04T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb242",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c127a0120fc788656178c",
    amount: 6130,
    description:
      "(Samosa Payment - Grah Puja + Chulbul Payment)Money sent to Sachin N Garg",
    date: "2025-09-04T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb243",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c12cb0120fc7886561792",
    amount: 27000,
    description: "(Paint Job) Money sent to Sunil Delhirama Shrivas",
    date: "2025-09-04T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb244",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c12cb0120fc7886561792",
    amount: 25000,
    description: "(SIPs) Transferred to Self,",
    date: "2025-09-04T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb245",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "6776b34d91c77e22302c5303",
    amount: 71,
    description:
      "(Rapido - meet with P) Paid to Roppen Transportation Services Private Limited",
    date: "2025-09-04T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb246",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.768Z",
    updatedAt: "2025-10-12T09:25:49.768Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c112d0120fc788656176e",
    amount: 189,
    description: "(Lunch - meet with P) Paid to 1420 Ahmedabad Apni Cbd Mall",
    date: "2025-09-04T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb247",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.769Z",
    updatedAt: "2025-10-12T09:25:49.769Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "678c8a182152f3cd1d998255",
    amount: 50,
    description: "(Petrol - Chulbul Scooty - Football) Paid to B R Petroleum",
    date: "2025-09-04T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb248",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.769Z",
    updatedAt: "2025-10-12T09:25:49.769Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "6790886daf98caee54103ab0",
    amount: 165,
    description: "(Football - KSA) Money sent to Tangariya Lalitsingh",
    date: "2025-09-04T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb249",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.769Z",
    updatedAt: "2025-10-12T09:25:49.769Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c10160120fc7886561760",
    amount: 971,
    description: "(Magic) Paid to Flavcoventuresprivat",
    date: "2025-09-04T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb24a",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.769Z",
    updatedAt: "2025-10-12T09:25:49.769Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 291,
    description: "(Eatsure - Personal) Paid to Rebel Marketplace India Pvt Ltd",
    date: "2025-09-05T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb24b",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.769Z",
    updatedAt: "2025-10-12T09:25:49.769Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 266,
    description: "(Zomato - Personal) Paid to Zomato Limited",
    date: "2025-09-05T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb24c",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.769Z",
    updatedAt: "2025-10-12T09:25:49.769Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 261,
    description: "(Eatsure - Personal) Money sent to Lokesh Kumar Vakhatram",
    date: "2025-09-07T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb24d",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.769Z",
    updatedAt: "2025-10-12T09:25:49.769Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "6790886daf98caee54103ab0",
    amount: 165,
    description: "(Football) Money sent to Tangariya Lalitsingh",
    date: "2025-09-08T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb24e",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.769Z",
    updatedAt: "2025-10-12T09:25:49.769Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 427,
    description: "(KFC - Personal) Paid to Sapphire Foods India Limited",
    date: "2025-09-08T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb24f",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.769Z",
    updatedAt: "2025-10-12T09:25:49.769Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c127a0120fc788656178c",
    amount: 1945,
    description: "(Mom - Prem darwaza) Paid to Shree Rajasthan Handlooms",
    date: "2025-09-08T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb250",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.769Z",
    updatedAt: "2025-10-12T09:25:49.769Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c10160120fc7886561760",
    amount: 459,
    description: "(KFC - Home) Paid to Sapphire Foods India Limited",
    date: "2025-09-08T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb251",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.769Z",
    updatedAt: "2025-10-12T09:25:49.769Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 157,
    description: "(Zomato - Personal) Paid to Eternal Limited",
    date: "2025-09-09T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb252",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.769Z",
    updatedAt: "2025-10-12T09:25:49.769Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c127a0120fc788656178c",
    amount: 504,
    description: "(Amazon - Mom) Paid to Amazon India",
    date: "2025-09-09T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb253",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.769Z",
    updatedAt: "2025-10-12T09:25:49.769Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "677c12cb0120fc7886561792",
    amount: 361,
    description: "(Zomato - Home - Cake - Dads bday) Paid to Zomato Limited",
    date: "2025-09-09T00:00:00.000Z",
    type: "variable",
    needOrWant: "need",
    _id: "68eb741d520be4c8269eb254",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.769Z",
    updatedAt: "2025-10-12T09:25:49.769Z",
  },
  {
    userId: "67711b7271bc8501797873f3",
    categoryId: "67745dc2095e1a82875caf99",
    amount: 197,
    description: "(Zomato - Personal) Paid to Zomato Limited",
    date: "2025-09-10T00:00:00.000Z",
    type: "variable",
    needOrWant: "want",
    _id: "68eb741d520be4c8269eb255",
    __v: 0,
    createdAt: "2025-10-12T09:25:49.769Z",
    updatedAt: "2025-10-12T09:25:49.769Z",
  },
];

// Add +1 month to date
const fixMonth = (dateStr) => {
  const date = new Date(dateStr);
  const fixed = new Date(date);
  fixed.setMonth(date.getMonth() + 1);
  return fixed;
};

const fixExpensesAndTrips = async () => {
  await connectDB();
  const session = await mongoose.startSession();
  session.startTransaction();
  let wrongExpenses = wrong_records;
  try {
    const idsToRemove = wrongExpenses.map((e) => e._id);

    // 1️⃣ Remove wrong expenses
    const deleteResult = await Expense.deleteMany(
      { _id: { $in: idsToRemove } },
      { session }
    );
    console.log(`Deleted ${deleteResult.deletedCount} wrong expenses`);

    // 2️⃣ Remove these expenses from Trip.expenses arrays
    await Trip.updateMany(
      { expenses: { $in: idsToRemove } },
      { $pull: { expenses: { $in: idsToRemove } } },
      { session }
    );
    console.log(`Removed wrong expenses from trip references`);

    // 3️⃣ Prepare corrected expense data
    const correctedExpenses = wrongExpenses.map((e) => ({
      userId: e.userId,
      categoryId: e.categoryId,
      amount: e.amount,
      description: e.description,
      date: fixMonth(e.date),
      type: e.type,
      needOrWant: e.needOrWant,
    }));

    // 4️⃣ Insert corrected expenses
    const insertedExpenses = await Expense.insertMany(correctedExpenses, {
      session,
    });
    console.log(`Inserted ${insertedExpenses.length} corrected expenses`);

    // 5️⃣ Update trips with corrected expense IDs
    for (let i = 0; i < wrongExpenses.length; i++) {
      const tripId = wrongExpenses[i].tripId;
      if (tripId) {
        await Trip.findByIdAndUpdate(
          tripId,
          { $push: { expenses: insertedExpenses[i]._id } },
          { session }
        );
      }
    }

    // ✅ Commit changes
    await session.commitTransaction();
    console.log("Transaction committed successfully.");
  } catch (err) {
    console.error("Error fixing expenses and trips:", err);
    await session.abortTransaction();
  } finally {
    session.endSession();
    await mongoose.connection.close();
    console.log("Database connection closed.");
  }
};

fixExpensesAndTrips();
